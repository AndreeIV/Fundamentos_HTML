const darkModeButton=document.getElementById("toggle-dark-mode"),highlightLinksButton=document.getElementById("toggle-highlight-links"),toggleImagesButton=document.getElementById("toggle-images"),togglePauseAnimationsButton=document.getElementById("toggle-pauseAnimations"),toggleHeadersButton=document.getElementById("toggle-headers"),toggleSpeakButton=document.getElementById("toggle-speak"),toggleSaturationButton=document.getElementById("toggle-saturation-mode"),toggleEnlargeTxtButton=document.getElementById("toggle-EnlargeTxt-mode"),toggleCursorButton=document.getElementById("toggle-cursor-mode"),toggleFontFamilyButton=document.getElementById("toggle-fontFamily-mode"),toggleTextSpacingButton=document.getElementById("toggle-textSpacing-mode"),toggleLineHeightButton=document.getElementById("toggle-lineHeight-mode"),toggleTextAlignButton=document.getElementById("toggle-textAlign-mode"),toggleRestoreCAMenuButton=document.getElementById("toggle-restoreCAMenu-mode"),toggleTooltipLupaButton=document.getElementById("toggle-tooltipLupaButton"),togglelayerStructureButton=document.getElementById("toggle-layerStructure"),toggleProfilDislexiaButton=document.getElementById("toggle-profilDislexia"),toggleProfilDaltonismoButton=document.getElementById("toggle-profilDaltonismo"),constMinusLayer=50;let mouseMoveHandler;const darkModeStates=["off","invert","dark","light"];let currentDarkModeIndex=0;const modeSaturationStates=["off","modSaturation1","modSaturation2","modSaturation3"];let currentModSaturationIndex=0;const enlargeTxtModeStates=["off","modZoom1","modZoom2","modZoom3","modZoom4"];let currentEnlargeTxtModeIndex=0;const cursorModeStates=["off","modCursor1","modCursor2","modCursor3"];let currentCursorModeIndex=0,readingGuideActive=!1,cursorX_RG=0,cursorY_RG=0;const fontFamilyModeStates=["off","modFontFamily1","modFontFamily2"];let currentFontFamilyModeIndex=0;const textSpacingModeStates=["off","modTextSpacing1","modTextSpacing2","modTextSpacing3"];let currentTextSpacingModeIndex=0;const lineHeightModeStates=["off","modLineHeight1","modLineHeight2","modLineHeight3"];let currentLineHeightModeIndex=0;const textAlignModeStates=["off","modTextAlign1","modTextAlign2","modTextAlign3","modTextAlign4"];let currentTextAlignModeIndex=0;function updateStorage(e,t){let a=JSON.parse(localStorage.getItem("cMenuAState"))||{};a[e]=t,localStorage.setItem("cMenuAState",JSON.stringify(a))}function restoreState(){return JSON.parse(localStorage.getItem("cMenuAState"))||{}}function simulateResize(){let e=new Event("resize");window.dispatchEvent(e)}function initializeLayers(e){let t=document.createElement("div"),a=document.createElement("div");t.className="cMenuA-layer cMenuA-topLayer",a.className="cMenuA-layer cMenuA-bottomLayer",document.body.appendChild(t),document.body.appendChild(a);let o=window.innerHeight;t.style.height=`${e-50}px`,a.style.height=`${o-e-50}px`,mouseMoveHandler=e=>{let n=e.clientY||o/2;t.style.height=`${n-50}px`,a.style.height=`${o-n-50}px`},document.addEventListener("mousemove",mouseMoveHandler)}function removeLayers(){document.querySelectorAll(".cMenuA-layer").forEach(e=>e.remove()),document.removeEventListener("mousemove",mouseMoveHandler)}const mouseMoveReadingGuide=e=>{cursorX_RG=e.clientX,cursorY_RG=e.clientY};function createReadingGuide(){document.addEventListener("mousemove",mouseMoveReadingGuide);let e=document.getElementById("cMenuA-readingGuide");e||((e=document.createElement("div")).id="cMenuA-readingGuide",e.className="cMenuA-readingGuide",document.body.appendChild(e)),updateGuidePosition()}function removeReadingGuide(){document.removeEventListener("mousemove",mouseMoveReadingGuide);let e=document.getElementById("cMenuA-readingGuide");e&&document.body.removeChild(e)}function updateGuidePosition(){let e=document.getElementById("cMenuA-readingGuide");e&&(e.style.left=`${cursorX_RG-150}px`,e.style.top=`${cursorY_RG-20}px`)}let mouseMoveHandlerLupa,cMenuALupa=null;function initializeTooltipLupa(){(cMenuALupa=document.createElement("div")).className="cMenuA-lupa",document.body.appendChild(cMenuALupa),mouseMoveHandlerLupa=e=>{let t=e.target;if(["SECTION","BODY","UL","TABLE","NAV","FOOTER","ASIDE"].includes(t.tagName)){cMenuALupa.style.display="none";return}let a=t.textContent.trim();if(a){let o=a.length>600?a.slice(0,600)+"...":a;cMenuALupa.textContent=o,cMenuALupa.style.display="block";let n=cMenuALupa.getBoundingClientRect(),i=Math.min(n.width,600),s=n.height,l=e.pageX,d=e.pageY+40,r=e.clientY,c=window.innerHeight;l+i>window.innerWidth&&(l=e.pageX-i-10),l<0&&(l=10),r+200>c&&(d=e.pageY-s),d<0&&(d=e.pageY+10),cMenuALupa.style.left=`${l}px`,cMenuALupa.style.top=`${d}px`}else cMenuALupa.style.display="none"},document.addEventListener("mousemove",mouseMoveHandlerLupa),document.addEventListener("mouseout",()=>{cMenuALupa&&(cMenuALupa.style.display="none")})}function removeTooltipLupa(){cMenuALupa&&(cMenuALupa.remove(),cMenuALupa=null),document.removeEventListener("mousemove",mouseMoveHandlerLupa)}function setDarkModeState(e){let t=darkModeButton.querySelector(".cMenuA-featuresTxt"),a=darkModeButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modDarkContrast","cMenuA-modLightContrast"),a.classList.remove("activeBar1","activeBar2","activeBar3"),document.documentElement.classList.remove("cMenuA-modInvert"),darkModeButton.classList.remove("active"),e){case"invert":document.documentElement.classList.add("cMenuA-modInvert"),darkModeButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Inver";break;case"dark":document.body.classList.add("cMenuA-modDarkContrast"),darkModeButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="Contraste oscuro";break;case"light":document.body.classList.add("cMenuA-modLightContrast"),darkModeButton.classList.add("active"),a.classList.add("activeBar3"),t.textContent="Contraste de luz";break;default:t.textContent="Contraste +"}currentDarkModeIndex=darkModeStates.indexOf(e)}function toggleDarkMode(){currentDarkModeIndex=(currentDarkModeIndex+1)%darkModeStates.length;let e=darkModeStates[currentDarkModeIndex];setDarkModeState(e),updateStorage("darkModeState",e)}function setSaturationModeState(e){let t=toggleSaturationButton.querySelector(".cMenuA-featuresTxt"),a=toggleSaturationButton.querySelector(".cMenuA-featuresBtnBar");switch(document.documentElement.classList.remove("cMenuA-modSaturation1","cMenuA-modSaturation2","cMenuA-modSaturation3"),toggleSaturationButton.classList.remove("active"),a.classList.remove("activeBar1","activeBar2","activeBar3"),e){case"modSaturation1":document.documentElement.classList.add("cMenuA-modSaturation1"),toggleSaturationButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Baja saturaci\xf3n";break;case"modSaturation2":document.documentElement.classList.add("cMenuA-modSaturation2"),toggleSaturationButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="Alta saturaci\xf3n";break;case"modSaturation3":document.documentElement.classList.add("cMenuA-modSaturation3"),toggleSaturationButton.classList.add("active"),a.classList.add("activeBar3"),t.textContent="Desaturar";break;default:t.textContent="Saturaci\xf3n"}currentModSaturationIndex=modeSaturationStates.indexOf(e)}function toggleSaturationMode(){currentModSaturationIndex=(currentModSaturationIndex+1)%modeSaturationStates.length;let e=modeSaturationStates[currentModSaturationIndex];setSaturationModeState(e),updateStorage("modeSaturationState",e)}function setEnlargeTxtModeState(e){let t=toggleEnlargeTxtButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modZoom1","cMenuA-modZoom2","cMenuA-modZoom3","cMenuA-modZoom4"),toggleEnlargeTxtButton.classList.remove("active"),t.classList.remove("activeBar1","activeBar2","activeBar3","activeBar4"),e){case"modZoom1":document.body.classList.add("cMenuA-modZoom1"),toggleEnlargeTxtButton.classList.add("active"),t.classList.add("activeBar1");break;case"modZoom2":document.body.classList.add("cMenuA-modZoom2"),toggleEnlargeTxtButton.classList.add("active"),t.classList.add("activeBar2");break;case"modZoom3":document.body.classList.add("cMenuA-modZoom3"),toggleEnlargeTxtButton.classList.add("active"),t.classList.add("activeBar3"),breack;case"modZoom4":document.body.classList.add("cMenuA-modZoom4"),toggleEnlargeTxtButton.classList.add("active"),t.classList.add("activeBar4")}currentEnlargeTxtModeIndex=enlargeTxtModeStates.indexOf(e)}function toggleEnlargeTxtMode(){currentEnlargeTxtModeIndex=(currentEnlargeTxtModeIndex+1)%enlargeTxtModeStates.length;let e=enlargeTxtModeStates[currentEnlargeTxtModeIndex];setEnlargeTxtModeState(e),updateStorage("enlargeTxtModeState",e)}function setCursorModeState(e){let t=toggleCursorButton.querySelector(".cMenuA-featuresTxt"),a=toggleCursorButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modCursor1","cMenuA-modCursor2","cMenuA-modCursor3"),toggleCursorButton.classList.remove("active"),a.classList.remove("activeBar1","activeBar2","activeBar3"),removeLayers(),document.body.classList.contains("cMenuA-modCursorLupa")&&toggleTooltipLupa(!0),readingGuideActive&&(readingGuideActive=!1,removeReadingGuide(),document.removeEventListener("mousemove",updateGuidePosition)),e){case"modCursor1":document.body.classList.add("cMenuA-modCursor1"),toggleCursorButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Gran cursor";break;case"modCursor2":document.body.classList.add("cMenuA-modCursor2"),toggleCursorButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="M\xe1scara de lectura";let o=event.clientY||window.innerHeight/2;initializeLayers(o);break;case"modCursor3":document.body.classList.add("cMenuA-modCursor3"),toggleCursorButton.classList.add("active"),a.classList.add("activeBar3"),t.textContent="Gu\xeda de lectura",readingGuideActive||(readingGuideActive=!0,createReadingGuide(),document.addEventListener("mousemove",updateGuidePosition));break;default:t.textContent="Cursor"}currentCursorModeIndex=cursorModeStates.indexOf(e)}function toggleCursorMode(){currentCursorModeIndex=(currentCursorModeIndex+1)%cursorModeStates.length;let e=cursorModeStates[currentCursorModeIndex];setCursorModeState(e),updateStorage("cursorModeState",e)}function toggleTooltipLupa(e=!1){if(e)document.body.classList.remove("cMenuA-modCursorLupa"),toggleTooltipLupaButton.classList.remove("active"),updateStorage("modTooltipLupaState",!1),removeTooltipLupa();else{let t=document.body.classList.contains("cMenuA-modCursor1")||document.body.classList.contains("cMenuA-modCursor2")||document.body.classList.contains("cMenuA-modCursor3");document.body.classList.contains("cMenuA-modCursorLupa")?(document.body.classList.remove("cMenuA-modCursorLupa"),toggleTooltipLupaButton.classList.remove("active"),updateStorage("modTooltipLupaState",!1),removeTooltipLupa()):(t&&(setCursorModeState("off"),updateStorage("cursorModeState","off")),initializeTooltipLupa(),document.body.classList.add("cMenuA-modCursorLupa"),toggleTooltipLupaButton.classList.add("active"),updateStorage("modTooltipLupaState",!0))}}function setFontFamilyModeState(e){let t=toggleFontFamilyButton.querySelector(".cMenuA-featuresTxt"),a=toggleFontFamilyButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modFontFamily1","cMenuA-modFontFamily2"),toggleFontFamilyButton.classList.remove("active"),a.classList.remove("activeBar1","activeBar2"),e){case"modFontFamily1":document.body.classList.add("cMenuA-modFontFamily1"),toggleFontFamilyButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Apto para dislexia",cargarFuenteOpenDyslexic();break;case"modFontFamily2":document.body.classList.add("cMenuA-modFontFamily2"),toggleFontFamilyButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="Fuentes legibles";break;default:t.textContent="Apto para dislexia"}currentFontFamilyModeIndex=fontFamilyModeStates.indexOf(e),simulateResize()}function toggleFontFamilyMode(){currentFontFamilyModeIndex=(currentFontFamilyModeIndex+1)%fontFamilyModeStates.length;let e=fontFamilyModeStates[currentFontFamilyModeIndex];setFontFamilyModeState(e),updateStorage("fontFamilyModeState",e)}function setTextSpacingModeState(e){let t=toggleTextSpacingButton.querySelector(".cMenuA-featuresTxt"),a=toggleTextSpacingButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modTextSpacing1","cMenuA-modTextSpacing2","cMenuA-modTextSpacing3"),toggleTextSpacingButton.classList.remove("active"),a.classList.remove("activeBar1","activeBar2","activeBar3"),e){case"modTextSpacing1":document.body.classList.add("cMenuA-modTextSpacing1"),toggleTextSpacingButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Espaciado ligero";break;case"modTextSpacing2":document.body.classList.add("cMenuA-modTextSpacing2"),toggleTextSpacingButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="Espaciado moderado";break;case"modTextSpacing3":document.body.classList.add("cMenuA-modTextSpacing3"),toggleTextSpacingButton.classList.add("active"),a.classList.add("activeBar3"),t.textContent="Espaciado pesado";break;default:t.textContent="Espaciado de texto"}currentTextSpacingModeIndex=textSpacingModeStates.indexOf(e),simulateResize()}function toggleTextSpacingMode(){currentTextSpacingModeIndex=(currentTextSpacingModeIndex+1)%textSpacingModeStates.length;let e=textSpacingModeStates[currentTextSpacingModeIndex];setTextSpacingModeState(e),updateStorage("textSpacingModeState",e)}function setLineHeightModeState(e){let t=toggleLineHeightButton.querySelector(".cMenuA-featuresTxt"),a=toggleLineHeightButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modLineHeight1","cMenuA-modLineHeight2","cMenuA-modLineHeight3"),toggleLineHeightButton.classList.remove("active"),a.classList.remove("activeBar1","activeBar2","activeBar3"),e){case"modLineHeight1":document.body.classList.add("cMenuA-modLineHeight1"),toggleLineHeightButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Altura de la l\xednea (1.5x)";break;case"modLineHeight2":document.body.classList.add("cMenuA-modLineHeight2"),toggleLineHeightButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="Altura de la l\xednea (1.75x)";break;case"modLineHeight3":document.body.classList.add("cMenuA-modLineHeight3"),toggleLineHeightButton.classList.add("active"),a.classList.add("activeBar3"),t.textContent="Altura de la l\xednea (2x)";break;default:t.textContent="Altura de la l\xednea"}currentLineHeightModeIndex=lineHeightModeStates.indexOf(e),simulateResize()}function toggleLineHeightMode(){currentLineHeightModeIndex=(currentLineHeightModeIndex+1)%lineHeightModeStates.length;let e=lineHeightModeStates[currentLineHeightModeIndex];setLineHeightModeState(e),updateStorage("lineHeightModeState",e)}function setTextAlignModeState(e){let t=toggleTextAlignButton.querySelector(".cMenuA-featuresTxt"),a=toggleTextAlignButton.querySelector(".cMenuA-featuresBtnBar");switch(document.body.classList.remove("cMenuA-modTextAlign1","cMenuA-modTextAlign2","cMenuA-modTextAlign3","cMenuA-modTextAlign4"),toggleTextAlignButton.classList.remove("active"),a.classList.remove("activeBar1","activeBar2","activeBar3","activeBar4"),e){case"modTextAlign1":document.body.classList.add("cMenuA-modTextAlign1"),toggleTextAlignButton.classList.add("active"),a.classList.add("activeBar1"),t.textContent="Alinear a la izquierda";break;case"modTextAlign2":document.body.classList.add("cMenuA-modTextAlign2"),toggleTextAlignButton.classList.add("active"),a.classList.add("activeBar2"),t.textContent="Alinear a la derecha";break;case"modTextAlign3":document.body.classList.add("cMenuA-modTextAlign3"),toggleTextAlignButton.classList.add("active"),a.classList.add("activeBar3"),t.textContent="Alinear al centro";break;case"modTextAlign4":document.body.classList.add("cMenuA-modTextAlign4"),toggleTextAlignButton.classList.add("active"),a.classList.add("activeBar4"),t.textContent="Alineaci\xf3n de ancho completo";break;default:t.textContent="Texto alineado"}currentTextAlignModeIndex=textAlignModeStates.indexOf(e)}function toggleTextAlignMode(){currentTextAlignModeIndex=(currentTextAlignModeIndex+1)%textAlignModeStates.length;let e=textAlignModeStates[currentTextAlignModeIndex];setTextAlignModeState(e),updateStorage("textAlignModeState",e)}function toggleHighlightLinks(){document.body.classList.toggle("cMenuA-modHighlightLinks");let e=document.body.classList.contains("cMenuA-modHighlightLinks");updateStorage("highlightLinks",e),highlightLinksButton.classList.toggle("active")}function toggleImages(){document.body.classList.toggle("cMenuA-modHideImages");let e=document.body.classList.contains("cMenuA-modHideImages");updateStorage("hideImages",e),toggleImagesButton.classList.toggle("active")}function togglePauseAnimations(){document.body.classList.toggle("cMenuA-modPauseAnimations");let e=document.body.classList.contains("cMenuA-modPauseAnimations");updateStorage("modPauseAnimations",e),togglePauseAnimationsButton.classList.toggle("active")}function toggleHeaders(){let e=document.body.classList.toggle("cMenuA-modHighlightHeaders");updateStorage("highlightHeaders",e),toggleHeadersButton.classList.toggle("active")}function sayTxt(e){speechSynthesis.speak(new SpeechSynthesisUtterance(e))}function handleFeatureButtonClick(e){e.target.classList.contains("cMenuA-featuresBtn")&&e.target.parentElement.classList.contains("cMenuA-features-btns")&&(toggleProfilDislexia(!0),toggleProfilDaltonismo(!0))}function crearEstructuraEncabezados(){let e=document.createElement("ul");e.classList.add("cMenuA-structureListHs");let t=document.querySelectorAll("h1, h2, h3"),a=document.createDocumentFragment();return t.forEach((e,t)=>{let o=`h-${t+1}`;e.id=o;let n=document.createElement("li"),i=document.createElement("p"),s=document.createElement("span");s.textContent=e.tagName,i.classList.add("cMenuA-structureListHsItem"),i.append(s,document.createTextNode(` ${e.textContent}`)),n.appendChild(i),i.addEventListener("click",function(){let e=document.getElementById(o);if(e&&null!==e.offsetParent){let t=e.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:t-80,behavior:"smooth"})}eliminarEstructuraCMenuALayer()}),null===e.offsetParent&&n.classList.add("h-hiden"),n.classList.add("H1"===e.tagName?"level-1":"H2"===e.tagName?"level-2":"level-3"),a.appendChild(n)}),e.appendChild(a),e}function crearEstructuraSecciones(){let e="main, header, nav, section, aside, form, footer",t=document.querySelectorAll(e),a=document.createElement("ul");a.classList.add("cMenuA-structureListSecciones");let o=document.createDocumentFragment(),n=1;return t.forEach(t=>{let a=function t(a){let o=1,n=a.parentElement;for(;n;)n.matches(e)&&o++,n=n.parentElement;return o}(t);if(a>3)return;let i=`cMenuA-sect${n}`;t.classList.add(i);let s=document.createElement("li");s.classList.add(`level-${a}`);let l=document.createElement("p");l.classList.add("cMenuA-structureListSeccionesItem");let d=document.createElement("span");d.textContent="</>",l.append(d,document.createTextNode(` ${t.tagName}`)),s.appendChild(l),l.addEventListener("click",function(){let e=document.querySelector(`.${i}`);if(e&&null!==e.offsetParent){let t=e.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:t-80,behavior:"smooth"})}eliminarEstructuraCMenuALayer()}),0===t.getClientRects().length&&s.classList.add("h-hiden"),o.appendChild(s),n++}),a.appendChild(o),a}function crearEstructuraLinks(){let e=document.createElement("ul");e.classList.add("cMenuA-structureListLinks");let t=document.querySelectorAll("a:not(.cMenuA-layerStructure a)"),a=document.createDocumentFragment();return t.forEach(e=>{let t=e.textContent.trim();if(!t&&!(t=e.getAttribute("title")||e.getAttribute("alt"))){let o=e.querySelector("[title], [alt]");t=o?o.getAttribute("title")||o.getAttribute("alt"):""}if(t){let n=document.createElement("li"),i=document.createElement("a");i.href=e.href,i.textContent=t,"_blank"===e.target?(i.target="_blank",n.classList.add("itemExternalLink")):n.classList.add("itemLink"),n.appendChild(i),a.appendChild(n)}}),e.appendChild(a),e}function crearEstructuraCMenuALayer(){if(document.querySelector(".cMenuA-layerStructure"))return;togglelayerStructureButton.classList.add("active");let e=document.createElement("div");e.classList.add("cMenuA-layerStructure");let t=document.createElement("div");t.classList.add("cMenuA-structure");let a=document.createElement("div");a.classList.add("cMenuA-structureHeader"),a.innerHTML='Estructura de la p\xe1gina <button class="cMenuA-layerStructure-close"></button>';let o=document.createElement("div");o.classList.add("cMenuA-structureTabs");let n=document.createElement("div");n.classList.add("cMenuA-structureTabsHeader");let i=[];["Encabezados","Secciones","Enlaces"].forEach((e,t)=>{let a=document.createElement("span");a.classList.add("cMenuA-structureTabsTab"),0===t&&a.classList.add("active"),a.textContent=e,n.appendChild(a);let o=document.createElement("div");o.classList.add("cMenuA-structureTabsBody"),0===t&&o.classList.add("active"),i.push(o)}),i[0].appendChild(crearEstructuraEncabezados()),i[1].appendChild(crearEstructuraSecciones()),i[2].appendChild(crearEstructuraLinks()),o.append(n,...i),t.append(a,o),e.appendChild(t),document.body.appendChild(e),setTimeout(()=>{document.querySelector(".cMenuA-layerStructure").classList.add("active"),n.addEventListener("click",handleClickTabs)},10),a.querySelector(".cMenuA-layerStructure-close").addEventListener("click",eliminarEstructuraCMenuALayer),setTimeout(()=>document.addEventListener("click",handleClickOutside))}function eliminarEstructuraCMenuALayer(){let e=document.querySelector(".cMenuA-layerStructure");e&&(togglelayerStructureButton.classList.remove("active"),document.querySelector(".cMenuA-layerStructure").classList.remove("active"),setTimeout(()=>{document.querySelector(".cMenuA-structureTabsHeader")?.removeEventListener("click",handleClickTabs),e.remove(),document.removeEventListener("click",handleClickOutside)},2e3))}function handleClickOutside(e){let t=document.querySelector(".cMenuA-structure"),a=document.getElementById("crear-estructura");t&&!t.contains(e.target)&&e.target!==a&&eliminarEstructuraCMenuALayer()}function handleClickTabs(e){if(e.target.classList.contains("cMenuA-structureTabsTab")){let t=document.querySelectorAll(".cMenuA-structureTabsTab"),a=document.querySelectorAll(".cMenuA-structureTabsBody");t.forEach(e=>e.classList.remove("active")),a.forEach(e=>e.classList.remove("active")),e.target.classList.add("active");let o=Array.from(t).indexOf(e.target);a[o]&&a[o].classList.add("active")}}function toggleTextToSpeech(e=!1){e?(sayTxt(),toggleSpeakButton.classList.remove("active"),document.body.classList.remove("cMenuA-modSpeak"),toggleSpeakButton.value="Activar texto a voz"):toggleSpeakButton.classList.contains("active")?(sayTxt("Se ha desactivado"),toggleSpeakButton.classList.remove("active"),document.body.classList.remove("cMenuA-modSpeak"),toggleSpeakButton.value="Activar texto a voz"):(sayTxt("Has activado la opci\xf3n de lectura en voz alta. Para escuchar da clic sobre los textos e im\xe1genes que te interesen. Cuando lo prefieras, puedes apagar el reproductor haciendo clic nuevamente en esta opci\xf3n."),toggleSpeakButton.classList.add("active"),toggleSpeakButton.value="Desactivar texto a voz",document.body.classList.add("cMenuA-modSpeak"))}let fuenteCargada=!1;function cargarFuenteOpenDyslexic(){if(!fuenteCargada){let e=new FontFace("OpenDyslexic","url(assets/fonts/opendyslexic-0.91.12/OpenDyslexic-Regular.woff2)");e.load().then(e=>{document.fonts.add(e),fuenteCargada=!0,console.log("Fuente OpenDyslexic cargada y aplicada.")}).catch(e=>{console.error("Error al cargar la fuente:",e)})}}function eliminarFuenteOpenDyslexic(){fuenteCargada&&(fuenteCargada=!1,console.log("Fuente OpenDyslexic eliminada."))}function toggleProfilDislexia(e=!1){e?(document.body.classList.remove("cMenuA-profilDislexia"),toggleProfilDislexiaButton.classList.remove("active"),updateStorage("profilDislexiaState",!1)):document.body.classList.contains("cMenuA-profilDislexia")?(resetFiltersAndProfiles(),setFontFamilyModeState("off"),updateStorage("fontFamilyModeState","off"),document.body.classList.contains("cMenuA-modPauseAnimations")&&togglePauseAnimations(),updateStorage("profilDislexiaState",!1)):(resetFiltersAndProfiles(),document.body.classList.add("cMenuA-profilDislexia"),toggleProfilDislexiaButton.classList.add("active"),setFontFamilyModeState("modFontFamily1"),updateStorage("fontFamilyModeState","modFontFamily1"),document.body.classList.contains("cMenuA-modPauseAnimations")||togglePauseAnimations(),updateStorage("profilDislexiaState",!0))}function toggleProfilDaltonismo(e=!1){e?(document.documentElement.classList.remove("cMenuA-profilDaltonismo"),toggleProfilDaltonismoButton.classList.remove("active"),updateStorage("profilDaltonismoState",!1)):document.documentElement.classList.contains("cMenuA-profilDaltonismo")?(resetFiltersAndProfiles(),setSaturationModeState("off"),updateStorage("modeSaturationState","off"),updateStorage("profilDaltonismoState",!1)):(resetFiltersAndProfiles(),document.documentElement.classList.add("cMenuA-profilDaltonismo"),toggleProfilDaltonismoButton.classList.add("active"),setSaturationModeState("modSaturation3"),updateStorage("modeSaturationState","modSaturation3"),updateStorage("profilDaltonismoState",!0))}function resetFiltersAndProfiles(){setDarkModeState("off"),updateStorage("darkModeState","off"),setSaturationModeState("off"),updateStorage("modeSaturationState","off"),setEnlargeTxtModeState("off"),updateStorage("enlargeTxtModeState","off"),setCursorModeState("off"),updateStorage("cursorModeState","off"),setFontFamilyModeState("off"),updateStorage("fontFamilyModeState","off"),document.body.classList.contains("cMenuA-modCursorLupa")&&toggleTooltipLupa(!0),setTextSpacingModeState("off"),updateStorage("textSpacingModeState","off"),setLineHeightModeState("off"),updateStorage("lineHeightModeState","off"),setTextAlignModeState("off"),updateStorage("textAlignModeState","off"),document.body.classList.contains("cMenuA-modHighlightLinks")&&toggleHighlightLinks(),document.body.classList.contains("cMenuA-modHideImages")&&toggleImages(),document.body.classList.contains("cMenuA-modPauseAnimations")&&togglePauseAnimations(),document.body.classList.contains("cMenuA-modHighlightHeaders")&&toggleHeaders(),document.body.classList.contains("cMenuA-profilDislexia")&&toggleProfilDislexia(!0),toggleProfilDaltonismo(!0),toggleTextToSpeech(!0),setTimeout(()=>{simulateResize()},1100)}toggleRestoreCAMenuButton&&toggleRestoreCAMenuButton.addEventListener("click",()=>{resetFiltersAndProfiles()}),darkModeButton.addEventListener("click",toggleDarkMode),toggleSaturationButton.addEventListener("click",toggleSaturationMode),toggleEnlargeTxtButton.addEventListener("click",toggleEnlargeTxtMode),toggleCursorButton.addEventListener("click",toggleCursorMode),toggleTooltipLupaButton.addEventListener("click",()=>{toggleTooltipLupa()}),toggleFontFamilyButton.addEventListener("click",toggleFontFamilyMode),toggleTextSpacingButton.addEventListener("click",toggleTextSpacingMode),toggleLineHeightButton.addEventListener("click",toggleLineHeightMode),toggleTextAlignButton.addEventListener("click",toggleTextAlignMode),highlightLinksButton.addEventListener("click",toggleHighlightLinks),toggleImagesButton.addEventListener("click",toggleImages),togglePauseAnimationsButton.addEventListener("click",togglePauseAnimations),toggleHeadersButton.addEventListener("click",toggleHeaders),togglelayerStructureButton.addEventListener("click",function(){crearEstructuraCMenuALayer()}),toggleSpeakButton.addEventListener("click",function(){toggleTextToSpeech()}),toggleProfilDislexiaButton.addEventListener("click",()=>{toggleProfilDislexia()}),toggleProfilDaltonismoButton.addEventListener("click",()=>{toggleProfilDaltonismo()}),window.addEventListener("load",()=>{let e=restoreState();e.darkModeState&&setDarkModeState(e.darkModeState),e.modeSaturationState&&setSaturationModeState(e.modeSaturationState),e.enlargeTxtModeState&&setEnlargeTxtModeState(e.enlargeTxtModeState),e.cursorModeState&&setCursorModeState(e.cursorModeState),e.modTooltipLupaState&&toggleTooltipLupa(),e.fontFamilyModeState&&setFontFamilyModeState(e.fontFamilyModeState),e.textSpacingModeState&&setTextSpacingModeState(e.textSpacingModeState),e.lineHeightModeState&&setLineHeightModeState(e.lineHeightModeState),e.textAlignModeState&&setTextAlignModeState(e.textAlignModeState),e.highlightLinks&&(document.body.classList.add("cMenuA-modHighlightLinks"),highlightLinksButton.classList.toggle("active")),e.hideImages&&(document.body.classList.add("cMenuA-modHideImages"),toggleImagesButton.classList.toggle("active")),e.modPauseAnimations&&(document.body.classList.add("cMenuA-modPauseAnimations"),togglePauseAnimationsButton.classList.toggle("active")),e.highlightHeaders&&(document.body.classList.add("cMenuA-modHighlightHeaders"),toggleHeadersButton.classList.toggle("active")),e.profilDislexiaState&&toggleProfilDislexia(),e.profilDaltonismoState&&toggleProfilDaltonismo(),setTimeout(()=>{simulateResize()},600)}),document.body.addEventListener("click",function(e){let t=e.target;if(toggleSpeakButton.classList.contains("active")&&["P","H1","H2","H3","H4","LI","SPAN","A","BUTTON"].includes(t.tagName)){let a=t.textContent;sayTxt(a)}}),document.body.addEventListener("click",function(e){let t=e.target;if(toggleSpeakButton.classList.contains("active")&&"IMG"===t.tagName){let a=t.getAttribute("alt");a?sayTxt(a):sayTxt("La imagen no tiene descripci\xf3n")}})
  //  document.addEventListener("DOMContentLoaded",()=>{ 
        let e=document.getElementById("js-btnCMenuAccesabilidad"),t=document.querySelector(".cMenuAccesabilidad"),a=document.querySelector(".cMenuA-close");document.querySelector(".cMenuA-main"),e.addEventListener("click",()=>{t.style.display="block",setTimeout(()=>{t.classList.add("is-visible"),document.addEventListener("click",handleFeatureButtonClick)},10)}),t.addEventListener("click",e=>{(e.target===t||e.target===a)&&(t.classList.remove("is-visible"),setTimeout(()=>{t.style.display="none",document.removeEventListener("click",handleFeatureButtonClick)},300))})
    //});